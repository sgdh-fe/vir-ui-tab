{"version":3,"file":"index.js","sources":["../src/index.js"],"sourcesContent":["import Vir from 'vir'\nimport $ from 'jquery'\n\nexport default function (options = {}) {\n  let {\n    index = 0,\n      eventType = 'click',\n      navSelector = 'ol > li',\n      containerSelector = 'ul > li',\n      navCurrentClass = 'cur',\n      containerCurrentClass = 'cur'\n  } = options\n\n  return Vir({\n    data: {\n      index: 0,\n      state: {}\n    },\n    events: function () {\n      if (eventType == 'click') {\n        return {\n          ['click->' + navSelector]: 'clickHandler'\n        }\n      }\n      if (eventType == 'mouseover') {\n        return {\n          ['mouseenter->' + navSelector]: 'enterHandler',\n          ['mouseleave->' + navSelector]: 'leaveHandler'\n        }\n      }\n    }(),\n    watch: {\n      index(result) {\n        let old = result.old\n        let index = result.value\n        this.$$(navSelector).eq(old).removeClass(navCurrentClass)\n        this.$$(containerSelector).eq(old).removeClass(containerCurrentClass)\n        this.$$(navSelector).eq(index).addClass(navCurrentClass)\n        this.$$(containerSelector).eq(index).addClass(containerCurrentClass)\n\n        // 更新是否初始化的状态\n        let state = this.get('state')\n        if (state[index]) {\n          return\n        }\n        state = Object.assign({}, state)\n        state[index] = true\n        this.set('state', state)\n      }\n    },\n    methods: {\n      clickHandler(event) {\n        event.preventDefault()\n        let $this = $(event.currentTarget)\n        this.set('index', $this.attr('data-index') || $this.index())\n      },\n      enterHandler(event) {\n        let $this = $(event.currentTarget)\n        this.set('timeout', setTimeout(() => {\n          this.set('index', $this.attr('data-index') || $this.index())\n        }, 200))\n      },\n      leaveHandler() {\n        clearTimeout(this.get('timeout'))\n      }\n    }\n  })\n}"],"names":["options","index","eventType","navSelector","containerSelector","navCurrentClass","containerCurrentClass","Vir","result","old","value","$$","eq","removeClass","addClass","state","get","babelHelpers.extends","set","event","preventDefault","$this","$","currentTarget","attr","setTimeout"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAGA,YAAe,YAAwB;MAAdA,OAAc,uEAAJ,EAAI;uBAQjCA,OARiC,CAEnCC,KAFmC;MAEnCA,KAFmC,kCAE3B,CAF2B;2BAQjCD,OARiC,CAGjCE,SAHiC;MAGjCA,SAHiC,sCAGrB,OAHqB;6BAQjCF,OARiC,CAIjCG,WAJiC;MAIjCA,WAJiC,wCAInB,SAJmB;8BAQjCH,OARiC,CAKjCI,iBALiC;MAKjCA,iBALiC,yCAKb,SALa;8BAQjCJ,OARiC,CAMjCK,eANiC;MAMjCA,eANiC,yCAMf,KANe;8BAQjCL,OARiC,CAOjCM,qBAPiC;MAOjCA,qBAPiC,yCAOT,KAPS;;;SAU9BC,IAAI;UACH;aACG,CADH;aAEG;KAHA;YAKD,YAAY;UACdL,aAAa,OAAjB,EAA0B;;;+BAErB,YAAYC,WADf,IAC6B,cAD7B;;UAIED,aAAa,WAAjB,EAA8B;;;iCAEzB,iBAAiBC,WADpB,IACkC,cADlC,QAEG,iBAAiBA,WAFpB,IAEkC,cAFlC;;KAPI,EALC;WAkBF;WAAA,iBACCK,MADD,EACS;YACRC,MAAMD,OAAOC,GAAjB;YACIR,QAAQO,OAAOE,KAAnB;aACKC,EAAL,CAAQR,WAAR,EAAqBS,EAArB,CAAwBH,GAAxB,EAA6BI,WAA7B,CAAyCR,eAAzC;aACKM,EAAL,CAAQP,iBAAR,EAA2BQ,EAA3B,CAA8BH,GAA9B,EAAmCI,WAAnC,CAA+CP,qBAA/C;aACKK,EAAL,CAAQR,WAAR,EAAqBS,EAArB,CAAwBX,KAAxB,EAA+Ba,QAA/B,CAAwCT,eAAxC;aACKM,EAAL,CAAQP,iBAAR,EAA2BQ,EAA3B,CAA8BX,KAA9B,EAAqCa,QAArC,CAA8CR,qBAA9C;;;YAGIS,QAAQ,KAAKC,GAAL,CAAS,OAAT,CAAZ;YACID,MAAMd,KAAN,CAAJ,EAAkB;;;gBAGVgB,SAAc,EAAd,EAAkBF,KAAlB,CAAR;cACMd,KAAN,IAAe,IAAf;aACKiB,GAAL,CAAS,OAAT,EAAkBH,KAAlB;;KAlCK;aAqCA;kBAAA,wBACMI,KADN,EACa;cACZC,cAAN;YACIC,QAAQC,EAAEH,MAAMI,aAAR,CAAZ;aACKL,GAAL,CAAS,OAAT,EAAkBG,MAAMG,IAAN,CAAW,YAAX,KAA4BH,MAAMpB,KAAN,EAA9C;OAJK;kBAAA,wBAMMkB,KANN,EAMa;;;YACdE,QAAQC,EAAEH,MAAMI,aAAR,CAAZ;aACKL,GAAL,CAAS,SAAT,EAAoBO,WAAW,YAAM;gBAC9BP,GAAL,CAAS,OAAT,EAAkBG,MAAMG,IAAN,CAAW,YAAX,KAA4BH,MAAMpB,KAAN,EAA9C;SADkB,EAEjB,GAFiB,CAApB;OARK;kBAAA,0BAYQ;qBACA,KAAKe,GAAL,CAAS,SAAT,CAAb;;;GAlDC,CAAP;;;;;"}